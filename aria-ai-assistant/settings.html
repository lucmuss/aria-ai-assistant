<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="settingsTitle">ARIA - KI-Assistent</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="header-content">
        <div class="logo-container">
          <img src="icons/ai-icon_128.png" alt="ARIA Icon" class="logo">
          <div class="title-container">
            <h1 id="settingsTitle" data-i18n="settingsTitle">ARIA - KI-Assistent</h1>
            <span id="version" class="version">v1.1</span>
          </div>
        </div>
        <div id="generationCounter" class="generation-counter"></div>
      </div>
    </header>

    <div class="actions-container">
      <div class="action-buttons">
        <button id="saveBtn" data-i18n="saveBtn">üíæ Einstellungen speichern</button>
        <button id="donateBtn" data-i18n="donateBtn" class="donate-btn">Donate</button>
      </div>
      <div class="action-buttons">
        <button id="testApiBtn" data-i18n="testApiBtn">üß™ API testen</button>
        <button id="testSttBtn" data-i18n="testSttBtn">üß™ STT API testen</button>
      </div>
      <div class="action-buttons">
        <button id="exportBtn" data-i18n="exportBtn">üì§ Einstellungen exportieren</button>
        <button id="importBtn" data-i18n="importBtn">üì• Einstellungen importieren</button>
      </div>
      <input type="file" id="importFile" accept=".json" class="import-file">
      <p id="status" class="status-box"></p>
    </div>

    <div class="settings-container">
      <div class="settings-section">
        <h2 class="section-title" data-i18n="extensionSettings">Erweiterungs-Einstellungen</h2>
        <form id="extensionForm">
          <div class="form-group">
            <label for="uiLanguage" data-i18n="languageLabel">Oberfl√§chensprache:</label>
            <select id="uiLanguage" title="Select the interface language for the extension">
              <option value="en">English (English)</option>
              <option value="de">Deutsch (German)</option>
            </select>
            <span class="help-text" data-i18n="languageDesc">W√§hle die Sprache der Benutzeroberfl√§che</span>
          </div>
          <div class="form-group">
            <label for="extensionContextSize" data-i18n="contextSizeLabel">Kontextgr√∂√üe:</label>
            <input type="number" id="extensionContextSize" value="5" title="Number of previous messages to include as context when generating responses">
            <span class="help-text" data-i18n="contextSizeDesc">Anzahl der vorherigen Nachrichten, die als Kontext gesendet werden</span>
          </div>
          <div class="form-group">
            <label for="extensionIncludeSender" data-i18n="includeSenderLabel">Absender einbeziehen:</label>
            <input type="checkbox" id="extensionIncludeSender" title="Include the sender's email address in the prompt context">
            <span class="help-text" data-i18n="includeSenderDesc">F√ºgt die Absenderadresse in den Prompt-Kontext ein</span>
          </div>
          <div class="form-group">
            <label for="clearEmailAfterSubmit" data-i18n="clearEmailLabel">E-Mail-Inhalt nach Submit l√∂schen:</label>
            <input type="checkbox" id="clearEmailAfterSubmit" title="Clear the email content before inserting the AI response">
            <span class="help-text" data-i18n="clearEmailDesc">L√∂scht den E-Mail-Inhalt vor dem Einf√ºgen der KI-Antwort</span>
          </div>
        </form>
      </div>

      <div class="settings-section">
        <h2 class="section-title" data-i18n="chatSettings">Chat API Einstellungen</h2>
        <form id="settingsForm">
          <div class="form-group">
            <label for="chatApiUrl" data-i18n="apiUrlLabel">API URL:</label>
            <input type="text" id="chatApiUrl" data-i18n-placeholder="apiUrlPlaceholder" placeholder="https://api.openai.com/v1/chat/completions" title="API endpoint URL for your AI model (e.g., OpenAI or local ULAMA server)">
            <span class="help-text" data-i18n="apiUrlDesc">Endpoint f√ºr dein Modell (z. B. OpenAI oder lokaler ULAMA-Server)</span>
          </div>
          <div class="form-group">
            <label for="chatApiKey" data-i18n="apiKeyLabel">API Key:</label>
            <input type="password" id="chatApiKey" data-i18n-placeholder="apiKeyPlaceholder" placeholder="sk-xxxxxxxxxxxx" title="Your API key from the provider (e.g., OpenAI, Ollama, etc.)">
            <span class="help-text" data-i18n="apiKeyDesc">Dein API-Schl√ºssel vom Anbieter (z. B. OpenAI, Ollama etc.)</span>
          </div>
          <div class="form-group">
            <label for="chatModel" data-i18n="modelLabel">Modell:</label>
            <input type="text" id="chatModel" value="gpt-4o-mini" title="Model name (e.g., gpt-4o, llama3, mistral)">
            <span class="help-text" data-i18n="modelDesc">Modellname (z. B. <code>gpt-4o</code>, <code>llama3</code>, <code>mistral</code>)</span>
          </div>
          <div class="form-group">
            <label for="chatTemperature" data-i18n="temperatureLabel">Temperatur:</label>
            <input type="number" step="0.1" min="0" max="2" id="chatTemperature" value="1.0" title="Controls creativity (0 = factual, 1 = creative)">
            <span class="help-text" data-i18n="temperatureDesc">Steuert Kreativit√§t (0 = sachlich, 1 = kreativ)</span>
          </div>
          <div class="form-group">
            <label for="chatMaxTokens" data-i18n="maxTokensLabel">Max Tokens:</label>
            <input type="number" id="chatMaxTokens" value="2000" title="Maximum length of the response text">
            <span class="help-text" data-i18n="maxTokensDesc">Maximale Textl√§nge der Antwort</span>
          </div>
          <div class="form-group">
            <label for="chatTone" data-i18n="toneLabel">Response Tone:</label>
            <select id="chatTone" title="Select the tone for AI responses">
              <option value="none" data-i18n="toneNone">None</option>
              <option value="formal" data-i18n="toneFormal">Formal</option>
              <option value="casual" data-i18n="toneCasual">Casual</option>
              <option value="friendly" data-i18n="toneFriendly">Friendly</option>
            </select>
            <span class="help-text" data-i18n="toneDesc">Select the tone for AI responses (this will modify the system prompt)</span>
          </div>
          <div class="form-group">
            <label for="chatLength" data-i18n="lengthLabel">Response Length:</label>
            <select id="chatLength" title="Select the length for AI responses">
              <option value="none" data-i18n="lengthNone">None</option>
              <option value="short" data-i18n="lengthShort">Short</option>
              <option value="medium" data-i18n="lengthMedium">Medium</option>
              <option value="long" data-i18n="lengthLong">Long</option>
            </select>
            <span class="help-text" data-i18n="lengthDesc">Select the length for AI responses (this will modify the system prompt)</span>
          </div>
        </form>
      </div>

      <div class="settings-section">
        <h2 class="section-title" data-i18n="systemPromptSettings">System Prompt Einstellungen</h2>
        <form id="systemPromptForm">
          <div class="form-group">
            <label for="systemPromptLibrary" data-i18n="systemPromptLibraryLabel">System Prompt Library:</label>
            <select id="systemPromptLibrary" title="Select a saved system prompt to load">
              <option value="">-- Select a saved system prompt --</option>
            </select>
            <span class="help-text" data-i18n="systemPromptLibraryDesc">Select a saved system prompt to load</span>
          </div>
          <div class="form-group">
            <label for="systemPromptName" data-i18n="systemPromptNameLabel">System Prompt Name:</label>
            <input type="text" id="systemPromptName" placeholder="Default" title="Enter a name for the current system prompt">
            <span class="help-text" data-i18n="systemPromptNameDesc">Enter a name for the current system prompt</span>
          </div>
          <div class="form-group">
            <label for="systemPromptContent" data-i18n="systemPromptContentLabel">System Prompt:</label>
            <textarea id="systemPromptContent" rows="4" placeholder="systemPromptDefault" title="Default text for the assistant (e.g., tone or style)"></textarea>
            <span class="help-text" data-i18n="systemPromptContentDesc">Vorgabetext f√ºr den Assistenten (z. B. Tonfall oder Stil)</span>
          </div>
          <div class="action-buttons">
            <button type="button" id="saveSystemPromptBtn" data-i18n="saveSystemPromptBtn">üíæ Save System Prompt</button>
            <button type="button" id="deleteSystemPromptBtn" data-i18n="deleteSystemPromptBtn">üóëÔ∏è Delete System Prompt</button>
          </div>
        </form>
      </div>

      <div class="settings-section">
        <h2 class="section-title" data-i18n="sttSettings">Speech-to-Text Einstellungen</h2>
        <form id="sttForm">
          <div class="form-group">
            <label for="sttApiUrl" data-i18n="sttApiUrlLabel">STT API URL:</label>
            <input type="text" id="sttApiUrl" data-i18n-placeholder="sttApiUrlPlaceholder" placeholder="https://api.openai.com/v1/audio/transcriptions" title="URL for speech transcription (e.g., Whisper)">
            <span class="help-text" data-i18n="sttApiUrlDesc">URL f√ºr Sprachtranskription (z. B. Whisper)</span>
          </div>
          <div class="form-group">
            <label for="sttApiKey" data-i18n="sttApiKeyLabel">STT API Key:</label>
            <input type="password" id="sttApiKey" data-i18n-placeholder="sttApiKeyPlaceholder" placeholder="sk-xxxxxxxxxxxx" title="API key for the STT provider">
            <span class="help-text" data-i18n="sttApiKeyDesc">API-Key f√ºr den STT-Anbieter</span>
          </div>
          <div class="form-group">
            <label for="sttModel" data-i18n="sttModelLabel">Modell:</label>
            <input type="text" id="sttModel" value="whisper-1" title="Speech model (e.g., whisper-1 or local tiny)">
            <span class="help-text" data-i18n="sttModelDesc">Sprachmodell (z. B. <code>whisper-1</code> oder lokal <code>tiny</code>)</span>
          </div>
          <div class="form-group">
            <label for="sttLanguage" data-i18n="sttLanguageLabel">Sprache:</label>
            <select id="sttLanguage" title="Language for speech recognition (empty = automatic)">
              <option value="" data-i18n="sttLanguageAuto">Auto</option>
              <option value="en">English (en)</option>
              <option value="de">Deutsch (de)</option>
            </select>
            <span class="help-text" data-i18n="sttLanguageDesc">Sprache f√ºr die Spracherkennung (leer = automatisch)</span>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="modules/js-yaml.min.js"></script>
  <script type="module" src="settings.js"></script>
</body>
</html>
